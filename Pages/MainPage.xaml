<?xml version="1.0" encoding="utf-8" ?>
<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             x:Class="FilaSinuca.Pages.MainPage"
             Title="Fila de Sinuca">

    <ScrollView>
        <VerticalStackLayout Padding="16" Spacing="12">

            <Label Text="Adicionar pessoa" FontSize="18" />
            <Grid ColumnDefinitions="*,Auto" ColumnSpacing="8">
                <Entry x:Name="NomeEntry" Placeholder="Nome" />
                <Button Grid.Column="1" Text="Entrar na fila" Clicked="OnEntrarClicked" />
            </Grid>

            <Border StrokeThickness="1" Padding="12">
                <VerticalStackLayout Spacing="8">
                    <Label Text="Mesa" FontAttributes="Bold" FontSize="18" />
                    <Grid ColumnDefinitions="*,*" ColumnSpacing="12">
                        <Frame>
                            <VerticalStackLayout>
                                <Label Text="Jogador 1" FontAttributes="Bold" />
                                <Label x:Name="Jogador1Label" Text="-" />
                                <Label x:Name="VitsP1" Text="" FontSize="12"/>
                                <Button Text="Remover P1 da mesa" Clicked="OnRemoverP1" />
                            </VerticalStackLayout>
                        </Frame>
                        <Frame Grid.Column="1">
                            <VerticalStackLayout>
                                <Label Text="Jogador 2" FontAttributes="Bold" />
                                <Label x:Name="Jogador2Label" Text="-" />
                                <Label x:Name="VitsP2" Text="" FontSize="12"/>
                                <Button Text="Remover P2 da mesa" Clicked="OnRemoverP2" />
                            </VerticalStackLayout>
                        </Frame>
                    </Grid>

                    <Grid ColumnDefinitions="*,*,*" ColumnSpacing="8">
                        <Button Text="Começar" Clicked="OnComecarClicked" />
                        <Button Grid.Column="1" Text="Limpar mesa" Clicked="OnLimparMesa" />
                        <Button Grid.Column="2" Text="Limpar TUDO" Clicked="OnLimparTudo" />
                    </Grid>

                    <Grid ColumnDefinitions="*,*" ColumnSpacing="8">
                        <Button Text="Vitória P1" Clicked="OnVitoriaP1" />
                        <Button Grid.Column="1" Text="Vitória P2" Clicked="OnVitoriaP2" />
                    </Grid>
                </VerticalStackLayout>
            </Border>

            <Border StrokeThickness="1" Padding="12">
                <VerticalStackLayout Spacing="8">
                    <Label Text="Regras" FontAttributes="Bold" FontSize="18" />
                    <Grid ColumnDefinitions="Auto,*" ColumnSpacing="8">
                        <Label Text="Limite de vitórias consecutivas:" VerticalTextAlignment="Center"/>
                        <Entry x:Name="EntryLimiteVits" Keyboard="Numeric" Text="3" />
                    </Grid>
                </VerticalStackLayout>
            </Border>

            <Border StrokeThickness="1" Padding="12">
                <VerticalStackLayout Spacing="8">
                    <Grid ColumnDefinitions="*,Auto" ColumnSpacing="8">
                        <Label Text="Fila" FontAttributes="Bold" FontSize="18" />
                        <Button Grid.Column="1" Text="Limpar fila" Clicked="OnLimparFila" />
                    </Grid>

                    <!-- Remoção por nome/ID -->
                    <Grid ColumnDefinitions="*,Auto" ColumnSpacing="8">
                        <Entry x:Name="EntryNomeRemover" Placeholder="Remover por nome exato" />
                        <Button Grid.Column="1" Text="Remover por nome" Clicked="OnRemoverPorNome" />
                    </Grid>
                    <Grid ColumnDefinitions="*,Auto" ColumnSpacing="8">
                        <Entry x:Name="EntryIdRemover" Placeholder="Remover por ID exato" />
                        <Button Grid.Column="1" Text="Remover por ID" Clicked="OnRemoverPorId" />
                    </Grid>

                    <CollectionView x:Name="FilaView"
                                    SelectionMode="Single"
                                    SelectionChanged="OnFilaSelectionChanged"
                                    HeightRequest="280">
                        <CollectionView.ItemTemplate>
                            <DataTemplate>
                                <SwipeView>
                                    <SwipeView.RightItems>
                                        <SwipeItems Mode="Reveal">
                                            <SwipeItem Text="Remover" Invoked="OnSwipeRemover" />
                                        </SwipeItems>
                                    </SwipeView.RightItems>
                                    <Grid Padding="8">
                                        <Label Text="{Binding Nome}" FontSize="16" />
                                        <Label Text="{Binding Id}" FontSize="10" Opacity="0.6"/>
                                    </Grid>
                                </SwipeView>
                            </DataTemplate>
                        </CollectionView.ItemTemplate>
                    </CollectionView>

                    <Grid ColumnDefinitions="*,Auto" ColumnSpacing="8">
                        <Entry x:Name="EntryIndiceRemover" Placeholder="Remover por índice (0-base)" Keyboard="Numeric"/>
                        <Button Grid.Column="1" Text="Remover por índice" Clicked="OnRemoverPorIndice" />
                    </Grid>

                    <Button Text="Remover selecionado" Clicked="OnRemoverSelecionado" />

                </VerticalStackLayout>
            </Border>

        </VerticalStackLayout>
    </ScrollView>
</ContentPage>
